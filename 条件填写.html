<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>条件 填写</title>
  <style>
    :root {
      --ink: #1b1b1b;
      --muted: #5d5d5d;
      --paper: #f9f4ea;
      --accent: #b94d2e;
      --accent-2: #1f6f78;
      --line: #e3d9c7;
      --bg1: #f0e3d1;
      --bg2: #f7f0e0;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Hiragino Mincho ProN", "Yu Mincho", "Noto Serif CJK JP", "Times New Roman", serif;
      color: var(--ink);
      background: radial-gradient(800px 500px at 10% -10%, #ffffff 0%, var(--bg1) 45%, transparent 60%),
                  radial-gradient(900px 500px at 110% 10%, #fff8ef 0%, var(--bg2) 50%, transparent 65%),
                  linear-gradient(180deg, #fffdf7 0%, #efe2cf 100%);
      min-height: 100vh;
    }
    .page {
      max-width: 1000px;
      margin: 0 auto;
      padding: 28px 18px 60px;
    }
    header {
      display: grid;
      gap: 10px;
      margin-bottom: 18px;
    }
    .title {
      font-size: 26px;
      letter-spacing: 0.08em;
      font-weight: 700;
    }
    .subtitle {
      color: var(--muted);
      font-size: 14px;
    }
    .card {
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.06);
      margin-bottom: 16px;
    }
    .card h2 {
      margin: 0 0 10px;
      font-size: 18px;
      color: var(--accent-2);
      letter-spacing: 0.08em;
    }
    .fields {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px 12px;
    }
    .field {
      grid-column: span 6;
      display: grid;
      gap: 6px;
    }
    .field.full { grid-column: 1 / -1; }
    .field.third { grid-column: span 4; }
    label {
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.04em;
    }
    .label-row {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      color: var(--ink);
      letter-spacing: 0.08em;
      font-weight: 600;
    }
    .label-icon {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: inline-grid;
      place-items: center;
      background: #efe2cf;
      color: #4a3c30;
      font-size: 14px;
    }
    .range-row {
      display: grid;
      grid-template-columns: 1fr auto 1fr auto;
      gap: 10px;
      align-items: center;
    }
    .range-unit {
      font-size: 14px;
      color: var(--ink);
      letter-spacing: 0.08em;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #d7c8b2;
      background: #fffaf2;
      color: var(--ink);
      font-family: inherit;
    }
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    .any-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
    }
    .any {
      font-size: 12px;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 8px;
      border: 1px solid var(--line);
      border-radius: 999px;
      background: #fffaf2;
      white-space: nowrap;
    }
    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    button {
      border: 0;
      padding: 10px 16px;
      border-radius: 999px;
      font-family: inherit;
      cursor: pointer;
      background: var(--accent);
      color: #fff;
      letter-spacing: 0.08em;
      box-shadow: 0 6px 16px rgba(185,77,46,0.25);
    }
    button.secondary {
      background: #efe2cf;
      color: #4a3c30;
      box-shadow: none;
      border: 1px solid var(--line);
    }
    pre {
      white-space: pre-wrap;
      background: #fffaf2;
      border: 1px dashed #c9b59b;
      padding: 14px;
      border-radius: 12px;
      min-height: 160px;
      line-height: 1.55;
      font-family: "SFMono-Regular", "Menlo", "Consolas", "Liberation Mono", monospace;
    }
    .note {
      color: var(--muted);
      font-size: 12px;
      margin-top: 8px;
    }
    .copy-hint {
      color: var(--accent-2);
      font-size: 12px;
      margin-left: 6px;
    }
    @media (max-width: 860px) {
      .field, .field.third { grid-column: 1 / -1; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title">条件 填写</div>
      <div class="subtitle">填写后点击“生成内容”，复制发送即可。</div>
    </header>

    <section class="card">
      <h2>条件输入</h2>
      <div class="fields">
        <div class="field full">
          <label for="commuteTo">通勤目的地（线路或车站）</label>
          <input id="commuteTo" type="text" placeholder="例如：山手线 新宿站" />
        </div>
        <div class="field third">
          <label for="people">入住人数</label>
          <input id="people" type="text" placeholder="例如：2人" />
        </div>
        <div class="field full">
          <span class="label-row"><span class="label-icon">￥</span>賃料</span>
          <div class="any-row">
            <div class="range-row">
              <input id="budgetFrom" type="text" />
              <span class="range-unit">〜</span>
              <input id="budgetTo" type="text" />
              <span class="range-unit">万円</span>
            </div>
            <label class="any"><input class="any-toggle" type="checkbox" data-target="budgetFrom,budgetTo" />任意</label>
          </div>
        </div>
        <div class="field full">
          <label>入居希望日（从/到）</label>
          <div class="any-row">
            <div class="any-row" style="grid-template-columns: 1fr 1fr;">
              <input id="moveInFrom" type="date" />
              <input id="moveInTo" type="date" />
            </div>
            <label class="any"><input class="any-toggle" type="checkbox" data-target="moveInFrom,moveInTo" />任意</label>
            <label class="any"><input class="asap-toggle" type="checkbox" data-target="moveInFrom,moveInTo" />越早越好</label>
          </div>
        </div>
        <div class="field third">
          <label for="walkDistance">房子到车站徒步距离</label>
          <div class="any-row">
            <input id="walkDistance" type="text" placeholder="例如：徒歩10分以内" />
            <label class="any"><input class="any-toggle" type="checkbox" data-target="walkDistance" />任意</label>
          </div>
        </div>
        <div class="field full">
          <span class="label-row"><span class="label-icon">㎡</span>面積</span>
          <div class="any-row">
            <div class="range-row">
              <input id="areaFrom" type="text" />
              <span class="range-unit">〜</span>
              <input id="areaTo" type="text" />
              <span class="range-unit">㎡</span>
            </div>
            <label class="any"><input class="any-toggle" type="checkbox" data-target="areaFrom,areaTo" />任意</label>
          </div>
        </div>
        <div class="field third">
          <label for="status">现在是语言学校 大学还是工作</label>
          <select id="status">
            <option value="">请选择</option>
            <option value="语言学校">语言学校</option>
            <option value="大学">大学</option>
            <option value="工作">工作</option>
            <option value="其他">其他</option>
          </select>
        </div>
        <div class="field third">
          <label for="schoolName">学校名称</label>
          <input id="schoolName" type="text" />
        </div>
        <div class="field third">
          <label for="age">年龄</label>
          <input id="age" type="number" min="0" placeholder="例如：20" />
        </div>
        <div class="field third">
          <label for="jpLevel">日语水平</label>
          <input id="jpLevel" type="text" placeholder="例如：N3" />
        </div>
        <div class="field third">
          <label for="visa">签证类型</label>
          <input id="visa" type="text" placeholder="例如：留学" />
        </div>
        <div class="field third">
          <label for="inJapan">在日/在国内</label>
          <select id="inJapan">
            <option value="">请选择</option>
            <option value="在日">在日</option>
            <option value="在国内">在国内</option>
          </select>
        </div>
        <div class="field full">
          <label for="otherNeeds">其他的一些需求</label>
          <textarea id="otherNeeds" placeholder="例如：需要宠物可、带电梯"></textarea>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>生成内容</h2>
      <div class="actions">
        <button id="generateBtn" type="button">生成内容</button>
        <button id="copyBtn" class="secondary" type="button">复制</button>
        <span id="copyStatus" class="copy-hint"></span>
      </div>
      <pre id="output" aria-live="polite"></pre>
      <div class="note">提醒：无需导出文件，复制以上内容发送至微信即可。</div>
      <div class="note">个人信息使用说明：填写内容仅用于房源申请与审查联络，不作其他用途。</div>
    </section>
  </div>

  <script>
    const el = (id) => document.getElementById(id);
    const value = (id) => el(id).value.trim();

    function buildOutput() {
      const moveInText = el("moveInFrom").dataset.asap === "true" && el("moveInTo").dataset.asap === "true"
        ? "越早越好"
        : (el("moveInFrom").dataset.any === "true" && el("moveInTo").dataset.any === "true"
          ? "任意"
          : `${value("moveInFrom")} ～ ${value("moveInTo")}`);

      const lines = [
        `通勤目的地（线路或车站）：${value("commuteTo")}`,
        `入住人数：${value("people")}`,
        `房租预算：${el("budgetFrom").dataset.any === "true" && el("budgetTo").dataset.any === "true"
          ? "任意"
          : `${value("budgetFrom")} ～ ${value("budgetTo")}`}`,
        `入居希望日：${moveInText}`,
        `房子到车站徒步距离：${el("walkDistance").dataset.any === "true" ? "任意" : value("walkDistance")}`,
        `面积：${el("areaFrom").dataset.any === "true" && el("areaTo").dataset.any === "true"
          ? "任意"
          : `${value("areaFrom")} ～ ${value("areaTo")}`}`,
        `现在是语言学校 大学还是工作：${value("status")}`,
        `学校名称：${value("schoolName")}`,
        `年龄：${value("age")}`,
        `日语水平：${value("jpLevel")}`,
        `签证类型：${value("visa")}`,
        `在日/在国内：${value("inJapan")}`,
        `其他的一些需求：${value("otherNeeds")}`
      ];

      return lines.join("\n");
    }

    el("generateBtn").addEventListener("click", () => {
      el("output").textContent = buildOutput();
      el("copyStatus").textContent = "";
    });

    el("copyBtn").addEventListener("click", async () => {
      const text = el("output").textContent.trim();
      if (!text) {
        el("copyStatus").textContent = "请先生成内容";
        return;
      }
      try {
        await navigator.clipboard.writeText(text);
        el("copyStatus").textContent = "已复制";
      } catch (err) {
        el("copyStatus").textContent = "复制失败，请手动复制";
      }
    });

    function toggleAny(checkbox) {
      const targets = checkbox.dataset.target.split(",");
      const asapCheckbox = document.querySelector(
        `.asap-toggle[data-target="${checkbox.dataset.target}"]`
      );
      if (checkbox.checked && asapCheckbox && asapCheckbox.checked) {
        asapCheckbox.checked = false;
        toggleAsap(asapCheckbox);
      }
      targets.forEach((id) => {
        const target = el(id.trim());
        if (!target) return;
        if (checkbox.checked) {
          target.dataset.any = "true";
          if (target.type !== "date") {
            target.value = "任意";
          } else {
            target.value = "";
          }
          target.setAttribute("disabled", "disabled");
        } else {
          target.removeAttribute("disabled");
          delete target.dataset.any;
          target.value = "";
        }
      });
    }

    document.querySelectorAll(".any-toggle").forEach((checkbox) => {
      checkbox.addEventListener("change", (e) => toggleAny(e.target));
    });

    function toggleAsap(checkbox) {
      const targets = checkbox.dataset.target.split(",");
      const anyCheckbox = document.querySelector(
        `.any-toggle[data-target="${checkbox.dataset.target}"]`
      );
      if (checkbox.checked && anyCheckbox && anyCheckbox.checked) {
        anyCheckbox.checked = false;
        toggleAny(anyCheckbox);
      }
      targets.forEach((id) => {
        const target = el(id.trim());
        if (!target) return;
        if (checkbox.checked) {
          target.dataset.asap = "true";
          target.value = "";
          target.setAttribute("disabled", "disabled");
        } else {
          target.removeAttribute("disabled");
          delete target.dataset.asap;
          target.value = "";
        }
      });
    }

    document.querySelectorAll(".asap-toggle").forEach((checkbox) => {
      checkbox.addEventListener("change", (e) => toggleAsap(e.target));
    });
  </script>
</body>
</html>
